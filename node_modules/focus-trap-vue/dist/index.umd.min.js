/*!
  * focus-trap-vue v0.0.4
  * (c) 2019 Eduardo San Martin Morote
  * @license MIT
  */
/*!
  * focus-trap-vue v0.0.4
  * (c) 2019 Eduardo San Martin Morote
  * @license MIT
  */
var FocusTrapVue=function(e){"use strict";var t=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'],n=t.join(","),a="undefined"==typeof Element?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;function i(e,t){t=t||{};var i,o,c,l=[],d=[],f=e.querySelectorAll(n);for(t.includeContainer&&a.call(e,n)&&(f=Array.prototype.slice.apply(f)).unshift(e),i=0;i<f.length;i++)r(o=f[i])&&(0===(c=u(o))?l.push(o):d.push({documentOrder:i,tabIndex:c,node:o}));return d.sort(s).map((function(e){return e.node})).concat(l)}function r(e){return!(!o(e)||function(e){return function(e){return l(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t=function(e){for(var t=0;t<e.length;t++)if(e[t].checked)return e[t]}(e.ownerDocument.querySelectorAll('input[type="radio"][name="'+e.name+'"]'));return!t||t===e}(e)}(e)||u(e)<0)}function o(e){return!(e.disabled||function(e){return l(e)&&"hidden"===e.type}(e)||function(e){return null===e.offsetParent||"hidden"===getComputedStyle(e).visibility}(e))}i.isTabbable=function(e){if(!e)throw new Error("No node provided");return!1!==a.call(e,n)&&r(e)},i.isFocusable=function(e){if(!e)throw new Error("No node provided");return!1!==a.call(e,c)&&o(e)};var c=t.concat("iframe").join(",");function u(e){var t=parseInt(e.getAttribute("tabindex"),10);return isNaN(t)?function(e){return"true"===e.contentEditable}(e)?0:e.tabIndex:t}function s(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex}function l(e){return"INPUT"===e.tagName}var d,f=i,v=function(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var a in n)p.call(n,a)&&(e[a]=n[a])}return e},p=Object.prototype.hasOwnProperty;var b,m=(b=[],{activateTrap:function(e){if(b.length>0){var t=b[b.length-1];t!==e&&t.pause()}var n=b.indexOf(e);-1===n?b.push(e):(b.splice(n,1),b.push(e))},deactivateTrap:function(e){var t=b.indexOf(e);-1!==t&&b.splice(t,1),b.length>0&&b[b.length-1].unpause()}});function h(e){return setTimeout(e,0)}var y=function(e,t){var n=document,a="string"==typeof e?n.querySelector(e):e,i=v({returnFocusOnDeactivate:!0,escapeDeactivates:!0},t),r={firstTabbableNode:null,lastTabbableNode:null,nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1},o={activate:function(e){if(r.active)return;g(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=n.activeElement;var t=e&&e.onActivate?e.onActivate:i.onActivate;t&&t();return u(),o},deactivate:c,pause:function(){if(r.paused||!r.active)return;r.paused=!0,s()},unpause:function(){if(!r.paused||!r.active)return;r.paused=!1,g(),u()}};return o;function c(e){if(r.active){clearTimeout(d),s(),r.active=!1,r.paused=!1,m.deactivateTrap(o);var t=e&&void 0!==e.onDeactivate?e.onDeactivate:i.onDeactivate;return t&&t(),(e&&void 0!==e.returnFocus?e.returnFocus:i.returnFocusOnDeactivate)&&h((function(){E(r.nodeFocusedBeforeActivation)})),o}}function u(){if(r.active)return m.activateTrap(o),d=h((function(){E(p())})),n.addEventListener("focusin",y,!0),n.addEventListener("mousedown",b,{capture:!0,passive:!1}),n.addEventListener("touchstart",b,{capture:!0,passive:!1}),n.addEventListener("click",F,{capture:!0,passive:!1}),n.addEventListener("keydown",w,{capture:!0,passive:!1}),o}function s(){if(r.active)return n.removeEventListener("focusin",y,!0),n.removeEventListener("mousedown",b,!0),n.removeEventListener("touchstart",b,!0),n.removeEventListener("click",F,!0),n.removeEventListener("keydown",w,!0),o}function l(e){var t=i[e],a=t;if(!t)return null;if("string"==typeof t&&!(a=n.querySelector(t)))throw new Error("`"+e+"` refers to no known node");if("function"==typeof t&&!(a=t()))throw new Error("`"+e+"` did not return a node");return a}function p(){var e;if(!(e=null!==l("initialFocus")?l("initialFocus"):a.contains(n.activeElement)?n.activeElement:r.firstTabbableNode||l("fallbackFocus")))throw new Error("You can't have a focus-trap without at least one focusable element");return e}function b(e){a.contains(e.target)||(i.clickOutsideDeactivates?c({returnFocus:!f.isFocusable(e.target)}):i.allowOutsideClick&&i.allowOutsideClick(e)||e.preventDefault())}function y(e){a.contains(e.target)||e.target instanceof Document||(e.stopImmediatePropagation(),E(r.mostRecentlyFocusedNode||p()))}function w(e){if(!1!==i.escapeDeactivates&&function(e){return"Escape"===e.key||"Esc"===e.key||27===e.keyCode}(e))return e.preventDefault(),void c();(function(e){return"Tab"===e.key||9===e.keyCode})(e)&&function(e){if(g(),e.shiftKey&&e.target===r.firstTabbableNode)return e.preventDefault(),void E(r.lastTabbableNode);if(!e.shiftKey&&e.target===r.lastTabbableNode)e.preventDefault(),E(r.firstTabbableNode)}(e)}function F(e){i.clickOutsideDeactivates||a.contains(e.target)||i.allowOutsideClick&&i.allowOutsideClick(e)||(e.preventDefault(),e.stopImmediatePropagation())}function g(){var e=f(a);r.firstTabbableNode=e[0]||p(),r.lastTabbableNode=e[e.length-1]||p()}function E(e){e!==n.activeElement&&(e&&e.focus?(e.focus(),r.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):E(p()))}},w={props:{active:{type:Boolean,default:!0},escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:Boolean,default:!0},initialFocus:[String,Function],fallbackFocus:[String,Function]},model:{event:"update:active",prop:"active"},mounted:function(){var e=this;this.$watch("active",(function(t){t?(e.trap=y(e.$el,{escapeDeactivates:e.escapeDeactivates,allowOutsideClick:function(){return e.allowOutsideClick},returnFocusOnDeactivate:e.returnFocusOnDeactivate,onActivate:function(){e.$emit("update:active",!0),e.$emit("activate")},onDeactivate:function(){e.$emit("update:active",!1),e.$emit("deactivate")},initialFocus:e.initialFocus||function(){return e.$el},fallbackFocus:e.fallbackFocus}),e.trap.activate()):e.trap&&e.trap.deactivate()}),{immediate:!0})},beforeDestroy:function(){this.trap&&this.trap.deactivate(),this.trap=null},methods:{activate:function(){this.trap.activate()},deactivate:function(){this.trap.deactivate()}},render:function(){var e=this.$slots.default;if(!e||!e.length||e.length>1)throw new Error("FocusTrap requires exactly one child");return e[0]}};return e.FocusTrap=w,e}({});
