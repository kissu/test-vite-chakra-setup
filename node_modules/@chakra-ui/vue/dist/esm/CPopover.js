import{Z as t,M as e,W as o,R as n,y as r,A as i,T as s}from"./index-31b72dba.js";import"./internal-icons-9ada1ec8.js";import"./clickoutside.directive-43e162b1.js";import"@emotion/css";import"./index-82d14538.js";import"vue";import a from"./CBox.js";import"./index-acf190c9.js";import"./CPseudoBox.js";import"./closebutton.styles-9318eb1d.js";import c from"./CCloseButton.js";import"./CPortal.js";import"./CNoSsr.js";import p from"./CFragment.js";import{CPopper as d,CPopperArrow as u}from"./CPopper.js";function l(t,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&-1===e.indexOf(n)&&(o[n]=t[n]);return o}var h={name:"CPopover",provide:function(){var t=this;return{$PopoverContext:function(){return t.PopoverContext}}},props:{id:String,defaultIsOpen:Boolean,isOpen:Boolean,returnFocusOnClose:{type:Boolean,default:!0},initialFocusRef:[Object,String,Function],trigger:{type:String,default:"click"},closeOnBlur:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},usePortal:Boolean,placement:{type:String,default:"auto"}},computed:{PopoverContext:function(){return{set:this.set,isOpen:this._isOpen,closePopover:this.closePopover,openPopover:this.openPopover,toggleOpen:this.toggleOpen,triggerNode:this.triggerNode,contentNode:this.contentNode,setTriggerNode:this.setTriggerNode,popoverId:this.computedId,trigger:this.trigger,isHovering:this.isHovering,handleBlur:this.handleBlur,closeOnEscape:this.closeOnEscape,headerId:this.headerId,bodyId:this.bodyId,usePortal:this.usePortal,placement:this.placement}},isControlled:function(){return!1!==this.isOpen},_isOpen:{get:function(){return this.isControlled?this.isOpen:this.isOpenValue},set:function(t){this.isOpenValue=t}},_initialFocusRef:function(){return t(this.initialFocusRef)?this.getNode(this.initialFocusRef()):this.getNode(this.initialFocusRef)},headerId:function(){return this.computedId+"-header"},bodyId:function(){return this.computedId+"-body"},computedId:function(){return this.id||"popover-id-"+e()}},data:function(){return{isOpenValue:this.defaultIsOpen||!1,triggerNode:void 0,contentNode:void 0,prevIsOpen:!1,isHovering:!1}},mounted:function(){var t=this;this.$watch("_isOpen",(function(e,o){t.prevIsOpen=o}),{immediate:!0}),this.$watch((function(t){return[t._isOpen,t._initialFocusRef,t.trigger,t.contentNode,t.triggerNode,t.prevIsOpen,t.returnFocusOnClose]}),(function(){t._isOpen&&"click"===t.trigger&&setTimeout((function(){t._initialFocusRef?t._initialFocusRef.focus():t.contentNode&&t.contentNode.focus()})),!t._isOpen&&t.prevIsOpen&&"click"===t.trigger&&t.returnFocusOnClose&&t.triggerNode&&t.triggerNode.focus()}))},methods:{closePopover:function(){this.isControlled||(this._isOpen=!1),this.$emit("close")},openPopover:function(){this.isControlled||(this._isOpen=!0),this.$emit("open")},toggleOpen:function(){this.isControlled||(this._isOpen=!this._isOpen),!0!==this._isOpen?this.$emit("open"):this.$emit("close")},handleBlur:function(t){this._isOpen&&this.closeOnBlur&&this.contentNode&&this.triggerNode&&!this.contentNode.contains(t.relatedTarget)&&!this.triggerNode.contains(t.relatedTarget)&&this.closePopover()},getNode:function(t){return"object"===o(t)?n(t)?t.$el:t:"string"==typeof t?r(t):null},set:function(t,e){return this[t]=e,this[t]}},render:function(t){return t(p,{attrs:{"data-chakra-component":"CPopover"}},[this.$scopedSlots.default({isOpen:this._isOpen,onClose:this.closePopover})])}},m={name:"CPopoverTrigger",inheritAttrs:!1,inject:["$PopoverContext"],computed:{triggerId:function(){return"popover-trigger-"+e()},context:function(){return this.$PopoverContext()},headerId:function(){return this.context.headerId},bodyId:function(){return this.context.bodyId},eventHandlers:function(){var t=this,e=this.context.trigger;return"click"===e?{click:function(e){t.$emit("click",e),t.context.toggleOpen()}}:"hover"===e?{focus:function(e){t.$emit("focus",e),t.context.openPopover()},keydown:function(e){t.$emit("keydown",e),"Escape"===e.key&&setTimeout(t.context.closePopover(),300)},blur:function(e){t.$emit("blur",e),t.context.closePopover()},mouseenter:function(e){t.$emit("mouseenter",e),t.context.set("isHovering",!0),setTimeout(t.context.openPopover(),300)},mouseleave:function(e){t.$emit("mouseleave",e),t.context.set("isHovering",!1),setTimeout((function(){!1===t.context.isHovering&&t.context.closePopover()}),300)}}:void 0}},mounted:function(){var t=this,e=this.context.set;this.$nextTick((function(){var o=r("#"+t.triggerId);o?e("triggerNode",o):console.warn("[Chakra-ui]: Unable to locate PopoverTrigger node")}))},render:function(t){var e=this.$slots.default.filter((function(t){return t.tag}));if(!e)return console.error("[Chakra-ui]: Popover Trigger expects at least one child");if(e.length&&e.length>1)return console.error("[Chakra-ui]: Popover Trigger can only have a single child element");var o=i(e[0],t),n=this.context,r=n.isOpen,s=n.popoverId;return t(o.componentOptions.Ctor,Object.assign({},o.data,o.componentOptions.listeners||{},{props:Object.assign({},o.data.props||{},o.componentOptions.propsData),attrs:Object.assign({},o.data.attrs,this.$attrs,{id:this.triggerId,"aria-haspopup":"dialog","aria-expanded":r,"aria-controls":s,"data-chakra-component":"CPopoverTrigger"}),nativeOn:this.eventHandlers}),o.componentOptions.children)}},f={name:"CPopoverContent",inheritAttrs:!1,inject:["$PopoverContext","$chakraColorMode"],props:{gutter:{type:[Number,String],default:4},ariaLabel:String},computed:{context:function(){return this.$PopoverContext()},contentId:function(){return"popover-content-"+e()},colorMode:function(){return this.$chakraColorMode()},eventHandlers:function(){var t=this,e=this.context,o=e.trigger,n=e.handleBlur,r=e.closePopover,i=e.closeOnEscape,s={};return"click"===o&&(s={blur:function(e){t.$emit("blur",e),n(e)}}),"hover"===o&&(s=Object.assign({},s,{mouseenter:function(e){t.$emit("mouseenter",e),t.context.set("isHovering",!0),setTimeout(t.context.openPopover(),300)},mouseleave:function(e){t.$emit("mouseleave",e),t.context.set("isHovering",!1),setTimeout((function(){!1===t.context.isHovering&&t.context.closePopover()}),300)}})),s=Object.assign({},s,{keydown:function(e){t.$emit("keydown",e),"Escape"===e.key&&i&&r&&r()}}),s},calculatedAttrs:function(){var t=this.context.trigger;return"click"===t?{role:"dialog","aria-modal":"false"}:"hover"===t?{role:"tooltip"}:void 0}},mounted:function(){var t=this.context,e=t.set,o=t.popoverId;this.$nextTick((function(){var t=r("#"+o);t?e("contentNode",t):console.warn("[Chakra-ui]: Unable to locate PopoverContent node")}))},render:function(t){var e=this.context,o=e.isOpen,n=e.triggerNode,r=e.popoverId,i=e.usePortal,s=e.placement,a="light"===this.colorMode?"white":"gray.700";return t(d,{props:{as:"section",usePortal:i,isOpen:o,placement:s,anchorEl:n,modifiers:[{name:"offset",options:{offset:[0,this.gutter]}}]},attrs:Object.assign({},{bg:a,width:"100%",position:"relative",display:"flex",flexDirection:"column",rounded:"md",shadow:"sm",maxWidth:"xs",_focus:{outline:0,shadow:"outline"}},this.$attrs,{id:r,tabIndex:-1,"aria-labelledby":this.headerId,"aria-describedby":this.bodyId,"aria-label":this.ariaLabel,"aria-hidden":!o},this.calculatedAttrs,{"data-chakra-component":"CPopoverContent"}),nativeOn:this.eventHandlers},this.$slots.default)}},g={name:"CPopoverHeader",mixins:[s("CPopoverHeader")],inject:["$PopoverContext"],computed:{context:function(){return this.$PopoverContext()},headerId:function(){return this.context.headerId},componentStyles:function(){return{px:"0.75rem",py:"0.5rem",borderBottomWidth:"1px"}}},render:function(t){return t("header",{class:[this.className],attrs:Object.assign({},this.computedAttrs,{id:this.headerId,"data-chakra-component":"CPopoverHeader"}),on:this.computedListeners},this.$slots.default)}},v={name:"CPopoverBody",mixins:[s("CPopoverBody")],inject:["$PopoverContext"],computed:{context:function(){return this.$PopoverContext()},bodyId:function(){return this.context.bodyId},componentStyles:function(){return{flex:1,px:"0.75rem",py:"0.5rem"}}},render:function(t){return t(this.as,{class:[this.className],attrs:Object.assign({},this.computedAttrs,{id:this.bodyId,"data-chakra-component":"CPopoverBody"}),on:this.computedListeners},this.$slots.default)}},x={name:"CPopoverArrow",functional:!0,render:function(t,e){var o=e.data,n=l(e,["data"]);return t(u,Object.assign({},n,{attrs:Object.assign({},o.attrs,{"data-chakra-component":"CPopoverArrow"})}))}},O={name:"CPopoverCloseButton",inheritAttrs:!1,inject:["$PopoverContext"],computed:{context:function(){return this.$PopoverContext()}},render:function(t){var e=this;return t(c,{props:{size:"sm"},on:{click:function(t){e.$emit("click",t),e.context.closePopover()}},attrs:Object.assign({},{pos:"absolute",rounded:"md",top:1,right:2,p:2},this.$attrs,{"data-chakra-component":"CPopoverCloseButton"})})}},P={name:"CPopoverFooter",functional:!0,render:function(t,e){var o=e.data,n=e.slots;l(e,["data","slots"]);return t(a,{props:{as:"footer"},attrs:Object.assign({},{px:"0.75rem",py:"0.5rem",borderTopWidth:"1px"},o.attrs,{"data-chakra-component":"CPopoverFooter"})},n().default)}};export{h as CPopover,x as CPopoverArrow,v as CPopoverBody,O as CPopoverCloseButton,f as CPopoverContent,P as CPopoverFooter,g as CPopoverHeader,m as CPopoverTrigger};
