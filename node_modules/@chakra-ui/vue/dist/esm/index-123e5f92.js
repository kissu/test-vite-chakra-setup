import{M as t,q as e,w as n,a as o}from"./index-31b72dba.js";import i from"./CPseudoBox.js";import{b as s,C as r}from"./index-4059a783.js";import a from"./CDivider.js";import u from"./CText.js";import c from"./CFragment.js";import{CPopper as l}from"./CPopper.js";var d={width:"full",flex:" 0 0 auto",userSelect:"none",transition:"background-color 220ms, color 220ms"},h=function(t){var e={theme:t.theme,colorMode:t.colorMode};return Object.assign({},d,function(t){var e=t.colorMode;return{_active:{bg:{light:"gray.200",dark:"whiteAlpha.200"}[e]},_focus:{bg:{light:"gray.100",dark:"whiteAlpha.100"}[e],outline:0},_disabled:{opacity:.4,cursor:"not-allowed"}}}(e))};var f={name:"CMenu",inject:["$chakraColorMode","$chakraTheme"],provide:function(){var t=this;return{$MenuContext:function(){return t.MenuContext}}},props:{controlledIsOpen:Boolean,isControlled:Boolean,defaultIsOpen:Boolean,onOpen:Function,onClose:Function,autoSelect:{type:Boolean,default:!0},closeOnBlur:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},defaultActiveIndex:Number,placement:String},data:function(){return{isOpen:this.isControlled?this.controlledIsOpen:this.defaultIsOpen||!1,activeIndex:this.defaultActiveIndex||-1,focusableItems:null,menuNode:void 0,buttonNode:void 0,prevIsOpen:void 0}},computed:{colorMode:function(){return this.$chakraColorMode()},theme:function(){return this.$chakraTheme()},menuId:function(){return"menu-"+t()},buttonId:function(){return"menubutton-"+t()},MenuContext:function(){return{activeIndex:this.activeIndex,isOpen:this.isOpen,menuNode:this.menuNode,buttonNode:this.buttonNode,focusableItems:this.focusableItems,placement:this.placement,menuId:this.menuId,buttonId:this.buttonId,colorMode:this.colorMode,focusAtIndex:this.focusAtIndex,focusOnLastItem:this.focusOnLastItem,focusOnFirstItem:this.focusOnFirstItem,closeMenu:this.closeMenu,autoSelect:this.autoSelect,closeOnSelect:this.closeOnSelect,closeOnBlur:this.closeOnBlur}}},mounted:function(){var t,o,i=this;this.$nextTick((function(){t=e&&document.querySelector("#"+i.menuId),i.menuNode=t,o=e&&document.querySelector("#"+i.buttonId),i.buttonNode=o})),this.$watch("isOpen",(function(t,e){i.prevIsOpen=e}),{immediate:!0}),this.$watch("isOpen",(function(e){if(e&&t){var o=n(t).filter((function(t){return["menuitem","menuitemradio","menuitemcheckbox"].includes(t.getAttribute("role"))}));i.focusableItems=t?o:[],i.initTabIndex()}})),this.$watch((function(t){return[t.activeIndex,t.isOpen,t.menuNode,t.buttonNode]}),(function(){-1!==i.activeIndex&&(i.focusableItems[i.activeIndex]&&i.focusableItems[i.activeIndex].focus(),i.updateTabIndex(i.activeIndex)),-1===i.activeIndex&&!i.isOpen&&i.prevIsOpen&&i.buttonNode&&i.buttonNode.focus(),-1===i.activeIndex&&i.isOpen&&i.menuNode&&i.menuNode.focus()}))},methods:{initTabIndex:function(){this.focusableItems.forEach((function(t,e){return 0===e&&t.setAttribute("tabindex",0)}))},updateTabIndex:function(t){if(this.focusableItems.length>0){var e=this.focusableItems[t];this.focusableItems.forEach((function(t){t!==e&&t.setAttribute("tabindex",-1)})),e.setAttribute("tabindex",0)}},resetTabIndex:function(){this.focusableItems&&this.focusableItems.forEach((function(t){return t.setAttribute("tabindex",-1)}))},openMenu:function(){this.isControlled||(this.isOpen=!0),this.onOpen&&this.onOpen()},focusOnFirstItem:function(){this.openMenu(),this.activeIndex=0},focusAtIndex:function(t){this.activeIndex=t},focusOnLastItem:function(){this.openMenu(),this.activeIndex=this.focusableItems.length-1},closeMenu:function(){this.isControlled||(this.isOpen=!1),this.onClose&&this.onClose(),this.activeIndex=-1,this.resetTabIndex()}},render:function(t){return t(c,{attrs:{"data-chakra-component":"CMenu"}},[this.$scopedSlots.default({isOpen:this.isOpen})])}},m={name:"CMenuButton",inheritAttrs:!1,inject:["$MenuContext"],props:s,computed:{context:function(){return this.$MenuContext()}},render:function(t){var e=this,n=this.context,i=n.isOpen,s=n.buttonId,a=n.menuId,u=n.closeMenu,c=n.autoSelect,l=n.focusOnFirstItem,d=n.focusOnLastItem,h=n.openMenu;return t(r,{props:Object.assign({},o(this.$props),{isLoading:!1}),attrs:Object.assign({},{id:s,role:"button","aria-haspopup":"menu","aria-expanded":i,"aria-controls":a,"data-chakra-component":"CMenuButton"},this.$attrs),nativeOn:{click:function(t){e.$emit("click",t),i?u():c?l():h()},keydown:function(t){"ArrowDown"===t.key&&(t.preventDefault(),l()),"ArrowUp"===t.key&&(t.preventDefault(),d())}}},this.$slots.default)}},p={name:"CMenuList",inheritAttrs:!1,inject:["$MenuContext","$chakraColorMode"],computed:{context:function(){return this.$MenuContext()},menuListStyles:function(){return function(t){return function(t){return Object.assign({},{color:"inherit",borderColor:"gray.200",borderWidth:"1px"},{light:{bg:"#fff",shadow:"sm"},dark:{bg:"gray.700",shadow:"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"}}[t])}(t)}},colorMode:function(){return this.$chakraColorMode()}},props:{placement:{type:String,validator:function(t){return t.match(/^(top|top-start|top-end|right|right-start|right-end|bottom|bottom-start|bottom-end|left|left-start|left-end)$/)}}},methods:{handleKeyDown:function(t){var e=this.context,n=e.activeIndex,o=e.focusAtIndex,i=e.focusOnFirstItem,s=e.focusOnLastItem,r=e.closeMenu,a=e.focusableItems,u=a.length;if("ArrowDown"===t.key?(t.preventDefault(),o((n+1)%u)):"ArrowUp"===t.key?(t.preventDefault(),o((n-1+u)%u)):"Home"===t.key?i():"End"===t.key?s():"Tab"===t.key?t.preventDefault():"Escape"===t.key&&r(),/^[a-z0-9_-]$/i.test(t.key)){t.stopPropagation(),t.preventDefault();var c=a.find((function(e){return e.textContent.toLowerCase().startsWith(t.key)}));c&&o(a.indexOf(c))}this.$emit("keydown",t)},handleBlur:function(t){var e=this.context,n=e.menuNode,o=e.buttonNode,i=e.isOpen,s=e.closeOnBlur,r=e.closeMenu;s&&i&&n&&o&&!n.contains(t.relatedTarget)&&!o.contains(t.relatedTarget)&&r(),this.$emit("blur",t)}},render:function(t){var e=this.context,n=e.isOpen,o=e.buttonNode,i=e.menuId,s=e.buttonId,r=e.placement,a=e.closeMenu,u=e.closeOnBlur;return t(l,{props:{usePortal:!1,isOpen:n,anchorEl:o,placement:this.placement||r,modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport"}}],closeOnClickAway:u,hasArrow:!1},attrs:Object.assign({},{minW:"3xs",rounded:"md",py:2,"z-index":1,_focus:{outline:0}},this.menuListStyles(this.colorMode),this.$attrs,{id:i,role:"menu","aria-labelledby":s,tabIndex:-1,"data-chakra-component":"CMenuButton"}),on:{close:a},nativeOn:{keydown:this.handleKeyDown,blur:this.handleBlur}},this.$slots.default)}},b={name:"CMenuItem",inheritAttrs:!1,inject:["$MenuContext","$chakraTheme","$chakraColorMode"],props:{isDisabled:Boolean,role:{type:String,default:"menuitem"},as:{type:[String,Object],default:"button"}},computed:{context:function(){return this.$MenuContext()},menuItemStyles:function(){return function(t){return h(t)}},theme:function(){return this.$chakraTheme()},colorMode:function(){return this.$chakraColorMode()}},render:function(t){var e=this,n=this.context,o=n.focusableItems,s=n.focusAtIndex,r=n.closeOnSelect,a=n.closeMenu;return t(i,{props:{as:this.as},attrs:Object.assign({},{display:"flex",textDecoration:"none",color:"inherit",minHeight:"32px",alignItems:"center",textAlign:"left",outline:"none",px:4},this.menuItemStyles({theme:this.theme,colorMode:this.colorMode}),this.$attrs,{role:this.role,tabIndex:-1,disabled:this.isDisabled,"aria-disabled":this.isDisabled,"data-chakra-component":"CMenuItem"}),nativeOn:{click:function(t){if(e.$emit("click",t),e.isDisabled)return t.stopPropagation(),void t.preventDefault();r&&a()},mouseenter:function(t){if(e.$emit("mouseenter",t),e.isDisabled)return t.stopPropagation(),void t.preventDefault();if(o&&o.length>0){var n=o.indexOf(t.currentTarget);s(n)}},mouseleave:function(){s(-1)},keydown:function(t){e.$emit("keydown",t),e.isDisabled||"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.$emit("click"),r&&a())}}},this.$slots.default)}},x={name:"CMenuDivider",functional:!0,render:function(t,e){var n=e.data,o=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&-1===e.indexOf(o)&&(n[o]=t[o]);return n}(e,["data"]);return t(a,Object.assign({},o,{attrs:Object.assign({},{marginTop:"0.5rem",marginBottom:"0.5rem"},n.attrs,{"data-chakra-component":"CMenuDivider"})}))}},I={name:"CMenuGroup",functional:!0,props:{title:String},render:function(t,e){var n=e.props,o=e.slots,i=e.data;return t("div",{attrs:{role:"group","data-chakra-component":"CMenuGroup"}},[n.title&&t(u,{attrs:Object.assign({},{mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},i.attrs)},n.title),o().default])}};export{f as C,m as a,p as b,b as c,I as d,x as e,h as u};
