import{q as e,O as t,M as n,y as i,x as r}from"./index-31b72dba.js";import"./internal-icons-9ada1ec8.js";import"@emotion/css";import"./index-82d14538.js";import{C as a}from"./index-acf190c9.js";import s from"./CPseudoBox.js";import{C as u}from"./index-9545ea5d.js";import"./input.styles-d30b399f.js";import{i as o,C as l}from"./index-e610f209.js";function c(e,t){return""===e?parseFloat(0).toFixed(t):parseFloat(e).toFixed(t)}var h={light:{borderColor:"inherit",_active:{bg:"gray.200"}},dark:{color:"whiteAlpha.800",borderColor:"whiteAlpha.300",_active:{bg:"whiteAlpha.300"}}},d=function(e){var t=e.colorMode,n=e.size;return Object.assign({},{borderLeft:"1px",_first:{roundedTopRight:"sm"===n?1:3},_last:{roundedBottomRight:"sm"===n?1:3,mt:"-1px",borderTopWidth:1},_disabled:{opacity:.4,cursor:"not-allowed"}},h[t])};function m(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&-1===t.indexOf(i)&&(n[i]=e[i]);return n}var p={name:"CNumberInput",inheritAttrs:!1,model:{prop:"value",event:"change"},props:{value:[Number,String],defaultValue:Number,focusInputOnChange:{type:Boolean,default:!0},clampValueOnBlur:{type:Boolean,default:!0},keepWithinRange:{type:Boolean,default:!0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},step:{type:Number,default:1},precision:Number,getAriaValueText:Function,isReadOnly:Boolean,isInvalid:Boolean,isDisabled:Boolean,isFullWidth:Boolean,size:{type:String,default:"md"},inputId:{type:String}},provide:function(){var e=this;return{$NumberInputContext:function(){return e.NumberInputContext}}},data:function(){return{innerValue:this.defaultValue||null,isFocused:!1,prevNexValue:null,inputNode:void 0,incrementPressed:!1,decrementPressed:!1,incrementEvents:{},decrementEvents:{},clickEvent:e&&document.documentElement.ontouchstart?"touchstart":"mousedown",incrementStepperProps:void 0,decrementStepperProps:void 0,incrementTimerId:null,decrementTimerId:null}},computed:{NumberInputContext:function(){var e=this;return{size:this.size,value:this._value,isReadOnly:this.isReadOnly,isInvalid:this.isInvalid,isDisabled:this.isDisabled,isFocused:this.isFocused,incrementStepper:this.incrementStepperProps,decrementStepper:this.decrementStepperProps,incrementButton:{nativeOn:{click:function(){return e.handleIncrement()}},attrs:Object.assign({},{"aria-label":"add"},this.keepWithinRange&{disabled:this.value===this.max,"aria-disabled":this.value===this.max})},decrementButton:{nativeOn:{click:function(){return e.handleDecrement()}},attrs:Object.assign({},{"aria-label":"subtract"},this.keepWithinRange&{disabled:this.value===this.min,"aria-disabled":this.value===this.min})},input:Object.assign({},{value:this._value,onChange:this.handleChange,onKeydown:this.handleKeydown,onFocus:function(){e.isFocused=!0},onBlur:function(){e.isFocused=!1,e.clampValueOnBlur&&e.validateAndClamp()},role:"spinbutton",type:"text","aria-valuemin":this.min,"aria-valuemax":this.max,"aria-disabled":this.isDisabled,"aria-valuenow":this.value,"aria-invalid":this.isInvalid||this.isOutOfRange},this.getAriaValueText&&{"aria-valuetext":this.ariaValueText},{readOnly:this.isReadOnly,disabled:this.isDisabled,autoComplete:"off"}),hiddenLabel:{"aria-live":"polite",text:this.getAriaValueText?this.ariaValueText:this._value,style:{position:"absolute",clip:"rect(0px, 0px, 0px, 0px)",height:1,width:1,margin:-1,whiteSpace:"nowrap",border:0,overflow:"hidden",padding:0}},inputId:this._inputId}},isControlled:function(){return t(this.value)},_value:{get:function(){return this.isControlled?c(this.value,this._precision):this.innerValue?c(this.innerValue,this._precision):this.innerValue},set:function(e){if(!this.defaultValue){var t=this.defaultValue;this.keepWithinRange&&(t=Math.max(Math.min(t,this.max),this.min)),t=c(t,this._precision),this.innerValue=t}this.innerValue=e}},defaultPrecision:function(){return Math.max((e=this.step,(t=/[1-9]([0]+$)|\.([0-9]*)/.exec(String(e)))?t[1]?-t[1].length:t[2]?t[2].length:0:0),0);var e,t},_precision:function(){return this.precision||this.defaultPrecision},isInteractive:function(){return!(this.isReadOnly||this.isDisabled)},isOutOfRange:function(){return this._value>this.max||this.value<this.min},ariaValueText:function(){return this.getAriaValueText?this.getAriaValueText(this._value):null},_inputId:function(){return"number-input-"+(this.inputId||n())}},mounted:function(){var e,t,n=this;this.$nextTick((function(){n.inputNode=i("#"+n._inputId,n.$el)})),this.$watch((function(e){return[e.incrementPressed,e._value]}),(function(){n.incrementTimerId&&clearTimeout(n.incrementTimerId),n.incrementPressed?n.incrementTimerId=setTimeout(n.handleIncrement,200):clearTimeout(n.incrementTimerId)}));var r=function(){n.incrementPressed=!1};this.incrementStepperProps=((e={})[this.clickEvent]=function(){n.handleIncrement(),n.incrementPressed=!0},e.mouseup=r,e.mouseleave=r,e.touchend=r,e),this.$watch((function(e){return[e.decrementPressed,e._value]}),(function(){n.decrementTimerId&&clearTimeout(n.decrementTimerId),n.decrementPressed?n.decrementTimerId=setTimeout(n.handleDecrement,200):clearTimeout(n.decrementTimerId)}));var a=function(){n.decrementPressed=!1};this.decrementStepperProps=((t={})[this.clickEvent]=function(){n.handleDecrement(),n.decrementPressed=!0},t.mouseup=a,t.mouseleave=a,t.touchend=a,t)},methods:{validateAndClamp:function(){var e=t(this.max),n=t(this.min);e&&this._value>this.max&&this.updateValue(this.max),n&&this._value<this.min&&this.updateValue(this.min)},getIncrementFactor:function(e){var t=1;return(e.metaKey||e.ctrlKey)&&(t=.1),e.shiftKey&&(t=10),t},shouldConvertToNumber:function(e){var t="string"!=typeof e?String(e):e,n=t.includes("."),i="0"===t.substr(t.length-1),r="."===t.substr(t.length-1);return(!n||!i)&&(!n||!r)},updateValue:function(e){if(this.prevNextValue!==e){var t=this.shouldConvertToNumber(e)?+e:e;this.isControlled||(this._value=t),this.$emit("change",t),this.prevNextValue=e}},handleIncrement:function(e){if(void 0===e&&(e=this.step),this.isInteractive){var t=Number(this._value)+Number(e);this.keepWithinRange&&(t=Math.min(t,this.max)),t=c(t,this._precision),this.updateValue(t),this.$emit("increment",t),this.focusInput()}},handleDecrement:function(e){if(void 0===e&&(e=this.step),this.isInteractive){var t=Number(this._value)-Number(e);this.keepWithinRange&&(t=Math.max(t,this.min)),t=c(t,this._precision),this.updateValue(t),this.$emit("decrement",t),this.focusInput()}},focusInput:function(){var e=this;requestAnimationFrame((function(){e.inputNode&&e.inputNode.focus()}))},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},handleKeydown:function(e){if(this.$emit("keydown",e),function(e){(function(e){var t=e.which?e.which:e.keyCode;return"."===e.key||!(t>31&&(t<48||t>57)&&(t<96||t>105)&&110!==t)})(e)||e.preventDefault()}(e),this.isInteractive){if("ArrowUp"===e.key){e.preventDefault();var n=this.getIncrementFactor(e);this.handleIncrement(n*this.step)}if("ArrowDown"===e.key){e.preventDefault();var i=this.getIncrementFactor(e);this.handleDecrement(i*this.step)}"Home"===e.key&&(e.preventDefault(),t(this.min)&&this.updateValue(this.max)),"End"===e.key&&(e.preventDefault(),t(this.max)&&this.updateValue(this.min))}},handleChange:function(e,t){var n,i=e.target.value;["",void 0].includes(i)&&(n=0),n=i,this.updateValue(n),this.$emit("change",n,e)}},render:function(e){var t=this.$props,n=(t.size,m(t,["size"]));return e(u,{props:{align:"stretch"},attrs:Object.assign({},n,{w:this.isFullWidth?"full":null,pos:"relative","data-chakra-component":"CNumberInput"})},this.$slots.default)}},f={name:"CNumberInputField",inheritAttrs:!1,inject:["$NumberInputContext"],computed:{context:function(){return this.$NumberInputContext()}},props:o,render:function(e){var t=this,n=this.context,i=n.size,a=n.inputId,s=n.input,u=s.value,o=s.onBlur,c=s.onFocus,h=s.onChange,d=s.onKeydown,p=s.disabled,f=s.readOnly,v=m(s,["value","onBlur","onFocus","onChange","onKeydown","disabled","readOnly"]);return e(l,{props:Object.assign({},this.$props,{isReadOnly:f,isDisabled:p,size:i,value:u}),attrs:Object.assign({},this.$attrs,{id:a},v,{"data-chakra-component":"CNumberInputField"}),on:{change:r((function(e){return t.$emit("change",e)}),h)},nativeOn:{input:r((function(e){return t.$emit("change",e)}),h),blur:r((function(e){return t.$emit("blur",e)}),o),focus:r((function(e){return t.$emit("focus",e)}),c),keydown:r((function(e){return t.$emit("keydown",e)}),d)}})}},v={name:"CNumberInputStepper",functional:!0,render:function(e,t){t.data;var n=t.slots,i=m(t,["data","slots"]);return e(u,Object.assign({},i,{props:{direction:"column"},attrs:{width:"24px",margin:"1px",position:"absolute",right:"0px",height:"calc(100% - 2px)",zIndex:1,"data-chakra-component":"CNumberInputStepper"}}),n().default)}},b={name:"CStepperButton",inheritAttrs:!1,inject:["$NumberInputContext","$chakraColorMode"],computed:{context:function(){return this.$NumberInputContext()},colorMode:function(){return this.$chakraColorMode()}},render:function(e){var t=this.context,n=t.isDisabled,i=t.size;return e(s,{attrs:Object.assign({},this.$attrs,{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transition:"all 0.3s",userSelect:"none",pointerEvents:n?"none":void 0,lineHeight:"normal"},d({colorMode:this.colorMode,size:i}),{"data-chakra-component":"CStepperButton"})},this.$slots.default)}},x={name:"CNumberIncrementStepper",inheritAttrs:!1,inject:["$NumberInputContext"],computed:{context:function(){return this.$NumberInputContext()}},render:function(e){var t=this.$slots.default||[e(a,{props:{name:"triangle-up"},attrs:{height:"0.6em",width:"0.6em"}})],n=this.context,i=n.size,r=n.incrementStepper,s="sm"===i?"11px":"15px";return e(b,{attrs:Object.assign({},this.$attrs,{fontSize:s,"data-chakra-component":"CNumberIncrementStepper"}),nativeOn:r},t)}},g={name:"CNumberDecrementStepper",inheritAttrs:!1,inject:["$NumberInputContext"],computed:{context:function(){return this.$NumberInputContext()}},render:function(e){var t=this.$slots.default||[e(a,{props:{name:"triangle-down"},attrs:{height:"0.6em",width:"0.6em"}})],n=this.context,i=n.size,r=n.decrementStepper,s="sm"===i?"11px":"15px";return e(b,{attrs:Object.assign({},this.$attrs,{fontSize:s,"data-chakra-component":"CNumberDecrementStepper"}),nativeOn:r},t)}};export{g as CNumberDecrementStepper,x as CNumberIncrementStepper,p as CNumberInput,f as CNumberInputField,v as CNumberInputStepper};
