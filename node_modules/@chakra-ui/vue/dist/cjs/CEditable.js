"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./index-60c8e38a.js");require("@emotion/css"),require("./index-7fafe605.js");var e={fontSize:"inherit",fontWeight:"inherit",textAlign:"inherit",bg:"transparent",transition:"all 0.2s",borderRadius:"md",px:"3px",mx:"-3px"},i={name:"CEditable",mixins:[t.createStyledAttrsMixin("CEditable")],props:{value:String,defaultValue:String,isDisabled:Boolean,startWithEditView:Boolean,selectAllOnFocus:{type:Boolean,default:!0},submitOnBlur:{type:Boolean,default:!0},isPreviewFocusable:{type:Boolean,default:!0},placeholder:{type:String,default:"Click to edit..."}},provide:function(){var t=this;return{$EditableContext:function(){return t.EditableContext}}},data:function(){return{isEditing:this.startWithEditView&&!this.isDisabled,innerValue:this.defaultValue||"",previousValue:this._value,inputNode:null}},computed:{isControlled:function(){return t.isDef(this.value)},_value:function(){return this.isControlled?this.value:this.innerValue},editableId:function(){return"editable-"+t.useId()},EditableContext:function(){return{editableId:this.editableId,isEditing:this.isEditing,isDisabled:this.isDisabled,placeholder:this.placeholder,onRequestEdit:this.onRequestEdit,submitOnBlur:this.submitOnBlur,isPreviewFocusable:this.isPreviewFocusable,value:this._value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onSubmit:this.handleSubmit,onCancel:this.handleCancel,onFocus:this.handleFocus}}},created:function(){this.previousValue=this._value},mounted:function(){var e=this;this.$watch("isEditing",(function(t){t&&e.$emit("edit")})),this.$watch((function(t){return[t.isEditing,t.selectAllOnFocus]}),(function(){e.$nextTick((function(){e.inputNode=t.getElement("#"+e.editableId,e.$el),e.isEditing&&e.inputNode&&(e.inputNode.focus(),e.selectAllOnFocus&&e.inputNode.select())}))}))},methods:{handleCancel:function(){this.isEditing=!1,this.innerValue=this.previousValue,this.innerValue!==this.previousValue&&this.$emit("change",this.previousValue),this.$emit("cancel",this.previousValue)},handleSubmit:function(){this.isEditing=!1,this.previousValue=this.innerValue,this.$emit("submit",this.innerValue)},handleChange:function(t){var e=t.target.value;this.isControlled||(this.innerValue=e),this.$emit("change",this.innerValue)},handleKeyDown:function(t){var e=t.key;"Escape"!==e?"Enter"===e&&this.handleSubmit():this.handleCancel()},handleFocus:function(t){this.selectAllOnFocus&&this.inputNode.select()},onRequestEdit:function(){this.isDisabled||(this.isEditing=!0)}},render:function(t){return t("div",{class:this.className,attrs:this.computedAttrs,on:this.computedListeners},[this.$scopedSlots.default({isEditing:this.isEditing,onSubmit:this.handleSubmit,onCancel:this.handleCancel,onRequestEdit:this.onRequestEdit})])}},n={name:"CEditablePreview",mixins:[t.createStyledAttrsMixin("CEditablePreview",!0)],inject:["$EditableContext"],computed:{context:function(){return this.$EditableContext()},hasValue:function(){return t.isDef(this.context.value)&&""!==this.context.value},componentStyles:function(){return Object.assign({},e,{cursor:"text",display:"inline-block",opacity:this.hasValue?void 0:.6})},tabIndex:function(){var t=this.context,e=t.isEditing,i=t.isDisabled,n=t.isPreviewFocusable;return e&&i||!n?null:0}},render:function(t){var e=this.context,i=e.isEditing,n=e.isDisabled,s=e.onRequestEdit,a=e.value,l=e.placeholder;return i?null:t("span",{class:[this.className],attrs:Object.assign({},{"aria-disabled":n,tabIndex:this.tabIndex},this.computedAttrs),on:Object.assign({},this.computedListeners,{focus:s})},this.hasValue?a:l)}},s={name:"CEditableInput",mixins:[t.createStyledAttrsMixin("CEditableInput",!0)],inject:["$EditableContext"],computed:{context:function(){return this.$EditableContext()},componentStyles:function(){return Object.assign({},{outline:"none",_focus:{shadow:"outline"}},e,{width:"full",_placeholder:{opacity:"0.6"}})}},render:function(t){var e=this,i=this.context,n=i.isEditing,s=i.editableId,a=i.onChange,l=i.onKeyDown,u=i.value,o=i.onSubmit,d=i.submitOnBlur,r=i.placeholder,h=i.isDisabled;return n?t("input",{class:[this.className],on:Object.assign({},this.computedListeners,{blur:function(t){d&&o(),e.$emit("blur",t)},input:a,keydown:l}),attrs:Object.assign({},this.computedAttrs,{id:s,disabled:h,"aria-disabled":h,value:u,placeholder:r})},this.$slots.default):null}};exports.CEditableInput=s,exports.CEditablePreview=n,exports.default=i;
