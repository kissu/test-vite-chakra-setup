"use strict";var e=require("./index-60c8e38a.js"),t=require("./CPseudoBox.js"),n=require("./index-da95e6dc.js"),o=require("./CDivider.js"),i=require("./CText.js"),r=require("./CFragment.js"),s=require("./CPopper.js"),u={width:"full",flex:" 0 0 auto",userSelect:"none",transition:"background-color 220ms, color 220ms"},a=function(e){var t={theme:e.theme,colorMode:e.colorMode};return Object.assign({},u,function(e){var t=e.colorMode;return{_active:{bg:{light:"gray.200",dark:"whiteAlpha.200"}[t]},_focus:{bg:{light:"gray.100",dark:"whiteAlpha.100"}[t],outline:0},_disabled:{opacity:.4,cursor:"not-allowed"}}}(t))};var c={name:"CMenu",inject:["$chakraColorMode","$chakraTheme"],provide:function(){var e=this;return{$MenuContext:function(){return e.MenuContext}}},props:{controlledIsOpen:Boolean,isControlled:Boolean,defaultIsOpen:Boolean,onOpen:Function,onClose:Function,autoSelect:{type:Boolean,default:!0},closeOnBlur:{type:Boolean,default:!0},closeOnSelect:{type:Boolean,default:!0},defaultActiveIndex:Number,placement:String},data:function(){return{isOpen:this.isControlled?this.controlledIsOpen:this.defaultIsOpen||!1,activeIndex:this.defaultActiveIndex||-1,focusableItems:null,menuNode:void 0,buttonNode:void 0,prevIsOpen:void 0}},computed:{colorMode:function(){return this.$chakraColorMode()},theme:function(){return this.$chakraTheme()},menuId:function(){return"menu-"+e.useId()},buttonId:function(){return"menubutton-"+e.useId()},MenuContext:function(){return{activeIndex:this.activeIndex,isOpen:this.isOpen,menuNode:this.menuNode,buttonNode:this.buttonNode,focusableItems:this.focusableItems,placement:this.placement,menuId:this.menuId,buttonId:this.buttonId,colorMode:this.colorMode,focusAtIndex:this.focusAtIndex,focusOnLastItem:this.focusOnLastItem,focusOnFirstItem:this.focusOnFirstItem,closeMenu:this.closeMenu,autoSelect:this.autoSelect,closeOnSelect:this.closeOnSelect,closeOnBlur:this.closeOnBlur}}},mounted:function(){var t,n,o=this;this.$nextTick((function(){t=e.canUseDOM&&document.querySelector("#"+o.menuId),o.menuNode=t,n=e.canUseDOM&&document.querySelector("#"+o.buttonId),o.buttonNode=n})),this.$watch("isOpen",(function(e,t){o.prevIsOpen=t}),{immediate:!0}),this.$watch("isOpen",(function(n){if(n&&t){var i=e.getFocusables(t).filter((function(e){return["menuitem","menuitemradio","menuitemcheckbox"].includes(e.getAttribute("role"))}));o.focusableItems=t?i:[],o.initTabIndex()}})),this.$watch((function(e){return[e.activeIndex,e.isOpen,e.menuNode,e.buttonNode]}),(function(){-1!==o.activeIndex&&(o.focusableItems[o.activeIndex]&&o.focusableItems[o.activeIndex].focus(),o.updateTabIndex(o.activeIndex)),-1===o.activeIndex&&!o.isOpen&&o.prevIsOpen&&o.buttonNode&&o.buttonNode.focus(),-1===o.activeIndex&&o.isOpen&&o.menuNode&&o.menuNode.focus()}))},methods:{initTabIndex:function(){this.focusableItems.forEach((function(e,t){return 0===t&&e.setAttribute("tabindex",0)}))},updateTabIndex:function(e){if(this.focusableItems.length>0){var t=this.focusableItems[e];this.focusableItems.forEach((function(e){e!==t&&e.setAttribute("tabindex",-1)})),t.setAttribute("tabindex",0)}},resetTabIndex:function(){this.focusableItems&&this.focusableItems.forEach((function(e){return e.setAttribute("tabindex",-1)}))},openMenu:function(){this.isControlled||(this.isOpen=!0),this.onOpen&&this.onOpen()},focusOnFirstItem:function(){this.openMenu(),this.activeIndex=0},focusAtIndex:function(e){this.activeIndex=e},focusOnLastItem:function(){this.openMenu(),this.activeIndex=this.focusableItems.length-1},closeMenu:function(){this.isControlled||(this.isOpen=!1),this.onClose&&this.onClose(),this.activeIndex=-1,this.resetTabIndex()}},render:function(e){return e(r.default,{attrs:{"data-chakra-component":"CMenu"}},[this.$scopedSlots.default({isOpen:this.isOpen})])}},l={name:"CMenuButton",inheritAttrs:!1,inject:["$MenuContext"],props:n.buttonProps,computed:{context:function(){return this.$MenuContext()}},render:function(t){var o=this,i=this.context,r=i.isOpen,s=i.buttonId,u=i.menuId,a=i.closeMenu,c=i.autoSelect,l=i.focusOnFirstItem,d=i.focusOnLastItem,h=i.openMenu;return t(n.CButton,{props:Object.assign({},e.pickProperty(this.$props),{isLoading:!1}),attrs:Object.assign({},{id:s,role:"button","aria-haspopup":"menu","aria-expanded":r,"aria-controls":u,"data-chakra-component":"CMenuButton"},this.$attrs),nativeOn:{click:function(e){o.$emit("click",e),r?a():c?l():h()},keydown:function(e){"ArrowDown"===e.key&&(e.preventDefault(),l()),"ArrowUp"===e.key&&(e.preventDefault(),d())}}},this.$slots.default)}},d={name:"CMenuList",inheritAttrs:!1,inject:["$MenuContext","$chakraColorMode"],computed:{context:function(){return this.$MenuContext()},menuListStyles:function(){return function(e){return function(e){return Object.assign({},{color:"inherit",borderColor:"gray.200",borderWidth:"1px"},{light:{bg:"#fff",shadow:"sm"},dark:{bg:"gray.700",shadow:"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"}}[e])}(e)}},colorMode:function(){return this.$chakraColorMode()}},props:{placement:{type:String,validator:function(e){return e.match(/^(top|top-start|top-end|right|right-start|right-end|bottom|bottom-start|bottom-end|left|left-start|left-end)$/)}}},methods:{handleKeyDown:function(e){var t=this.context,n=t.activeIndex,o=t.focusAtIndex,i=t.focusOnFirstItem,r=t.focusOnLastItem,s=t.closeMenu,u=t.focusableItems,a=u.length;if("ArrowDown"===e.key?(e.preventDefault(),o((n+1)%a)):"ArrowUp"===e.key?(e.preventDefault(),o((n-1+a)%a)):"Home"===e.key?i():"End"===e.key?r():"Tab"===e.key?e.preventDefault():"Escape"===e.key&&s(),/^[a-z0-9_-]$/i.test(e.key)){e.stopPropagation(),e.preventDefault();var c=u.find((function(t){return t.textContent.toLowerCase().startsWith(e.key)}));c&&o(u.indexOf(c))}this.$emit("keydown",e)},handleBlur:function(e){var t=this.context,n=t.menuNode,o=t.buttonNode,i=t.isOpen,r=t.closeOnBlur,s=t.closeMenu;r&&i&&n&&o&&!n.contains(e.relatedTarget)&&!o.contains(e.relatedTarget)&&s(),this.$emit("blur",e)}},render:function(e){var t=this.context,n=t.isOpen,o=t.buttonNode,i=t.menuId,r=t.buttonId,u=t.placement,a=t.closeMenu,c=t.closeOnBlur;return e(s.CPopper,{props:{usePortal:!1,isOpen:n,anchorEl:o,placement:this.placement||u,modifiers:[{name:"preventOverflow",options:{rootBoundary:"viewport"}}],closeOnClickAway:c,hasArrow:!1},attrs:Object.assign({},{minW:"3xs",rounded:"md",py:2,"z-index":1,_focus:{outline:0}},this.menuListStyles(this.colorMode),this.$attrs,{id:i,role:"menu","aria-labelledby":r,tabIndex:-1,"data-chakra-component":"CMenuButton"}),on:{close:a},nativeOn:{keydown:this.handleKeyDown,blur:this.handleBlur}},this.$slots.default)}},h={name:"CMenuItem",inheritAttrs:!1,inject:["$MenuContext","$chakraTheme","$chakraColorMode"],props:{isDisabled:Boolean,role:{type:String,default:"menuitem"},as:{type:[String,Object],default:"button"}},computed:{context:function(){return this.$MenuContext()},menuItemStyles:function(){return function(e){return a(e)}},theme:function(){return this.$chakraTheme()},colorMode:function(){return this.$chakraColorMode()}},render:function(e){var n=this,o=this.context,i=o.focusableItems,r=o.focusAtIndex,s=o.closeOnSelect,u=o.closeMenu;return e(t.default,{props:{as:this.as},attrs:Object.assign({},{display:"flex",textDecoration:"none",color:"inherit",minHeight:"32px",alignItems:"center",textAlign:"left",outline:"none",px:4},this.menuItemStyles({theme:this.theme,colorMode:this.colorMode}),this.$attrs,{role:this.role,tabIndex:-1,disabled:this.isDisabled,"aria-disabled":this.isDisabled,"data-chakra-component":"CMenuItem"}),nativeOn:{click:function(e){if(n.$emit("click",e),n.isDisabled)return e.stopPropagation(),void e.preventDefault();s&&u()},mouseenter:function(e){if(n.$emit("mouseenter",e),n.isDisabled)return e.stopPropagation(),void e.preventDefault();if(i&&i.length>0){var t=i.indexOf(e.currentTarget);r(t)}},mouseleave:function(){r(-1)},keydown:function(e){n.$emit("keydown",e),n.isDisabled||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),n.$emit("click"),s&&u())}}},this.$slots.default)}},f={name:"CMenuDivider",functional:!0,render:function(e,t){var n=t.data,i=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&-1===t.indexOf(o)&&(n[o]=e[o]);return n}(t,["data"]);return e(o.default,Object.assign({},i,{attrs:Object.assign({},{marginTop:"0.5rem",marginBottom:"0.5rem"},n.attrs,{"data-chakra-component":"CMenuDivider"})}))}},p={name:"CMenuGroup",functional:!0,props:{title:String},render:function(e,t){var n=t.props,o=t.slots,r=t.data;return e("div",{attrs:{role:"group","data-chakra-component":"CMenuGroup"}},[n.title&&e(i.default,{attrs:Object.assign({},{mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},r.attrs)},n.title),o().default])}};exports.CMenu=c,exports.CMenuButton=l,exports.CMenuDivider=f,exports.CMenuGroup=p,exports.CMenuItem=h,exports.CMenuList=d,exports.useMenuItemStyle=a;
