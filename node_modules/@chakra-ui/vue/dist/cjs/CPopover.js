"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./index-60c8e38a.js");require("./internal-icons-94dfadf3.js"),require("./clickoutside.directive-913f0010.js"),require("@emotion/css"),require("./index-7fafe605.js"),require("vue");var t=require("./CBox.js");require("./index-74285c40.js"),require("./CPseudoBox.js"),require("./closebutton.styles-c3bf335a.js");var o=require("./CCloseButton.js");require("./CPortal.js"),require("./CNoSsr.js");var n=require("./CFragment.js"),r=require("./CPopper.js");function i(e,t){var o={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&-1===t.indexOf(n)&&(o[n]=e[n]);return o}var s={name:"CPopover",provide:function(){var e=this;return{$PopoverContext:function(){return e.PopoverContext}}},props:{id:String,defaultIsOpen:Boolean,isOpen:Boolean,returnFocusOnClose:{type:Boolean,default:!0},initialFocusRef:[Object,String,Function],trigger:{type:String,default:"click"},closeOnBlur:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},usePortal:Boolean,placement:{type:String,default:"auto"}},computed:{PopoverContext:function(){return{set:this.set,isOpen:this._isOpen,closePopover:this.closePopover,openPopover:this.openPopover,toggleOpen:this.toggleOpen,triggerNode:this.triggerNode,contentNode:this.contentNode,setTriggerNode:this.setTriggerNode,popoverId:this.computedId,trigger:this.trigger,isHovering:this.isHovering,handleBlur:this.handleBlur,closeOnEscape:this.closeOnEscape,headerId:this.headerId,bodyId:this.bodyId,usePortal:this.usePortal,placement:this.placement}},isControlled:function(){return!1!==this.isOpen},_isOpen:{get:function(){return this.isControlled?this.isOpen:this.isOpenValue},set:function(e){this.isOpenValue=e}},_initialFocusRef:function(){return e.isFunction(this.initialFocusRef)?this.getNode(this.initialFocusRef()):this.getNode(this.initialFocusRef)},headerId:function(){return this.computedId+"-header"},bodyId:function(){return this.computedId+"-body"},computedId:function(){return this.id||"popover-id-"+e.useId()}},data:function(){return{isOpenValue:this.defaultIsOpen||!1,triggerNode:void 0,contentNode:void 0,prevIsOpen:!1,isHovering:!1}},mounted:function(){var e=this;this.$watch("_isOpen",(function(t,o){e.prevIsOpen=o}),{immediate:!0}),this.$watch((function(e){return[e._isOpen,e._initialFocusRef,e.trigger,e.contentNode,e.triggerNode,e.prevIsOpen,e.returnFocusOnClose]}),(function(){e._isOpen&&"click"===e.trigger&&setTimeout((function(){e._initialFocusRef?e._initialFocusRef.focus():e.contentNode&&e.contentNode.focus()})),!e._isOpen&&e.prevIsOpen&&"click"===e.trigger&&e.returnFocusOnClose&&e.triggerNode&&e.triggerNode.focus()}))},methods:{closePopover:function(){this.isControlled||(this._isOpen=!1),this.$emit("close")},openPopover:function(){this.isControlled||(this._isOpen=!0),this.$emit("open")},toggleOpen:function(){this.isControlled||(this._isOpen=!this._isOpen),!0!==this._isOpen?this.$emit("open"):this.$emit("close")},handleBlur:function(e){this._isOpen&&this.closeOnBlur&&this.contentNode&&this.triggerNode&&!this.contentNode.contains(e.relatedTarget)&&!this.triggerNode.contains(e.relatedTarget)&&this.closePopover()},getNode:function(t){return"object"===e._typeof(t)?e.isVueComponent(t)?t.$el:t:"string"==typeof t?e.getElement(t):null},set:function(e,t){return this[e]=t,this[e]}},render:function(e){return e(n.default,{attrs:{"data-chakra-component":"CPopover"}},[this.$scopedSlots.default({isOpen:this._isOpen,onClose:this.closePopover})])}},a={name:"CPopoverTrigger",inheritAttrs:!1,inject:["$PopoverContext"],computed:{triggerId:function(){return"popover-trigger-"+e.useId()},context:function(){return this.$PopoverContext()},headerId:function(){return this.context.headerId},bodyId:function(){return this.context.bodyId},eventHandlers:function(){var e=this,t=this.context.trigger;return"click"===t?{click:function(t){e.$emit("click",t),e.context.toggleOpen()}}:"hover"===t?{focus:function(t){e.$emit("focus",t),e.context.openPopover()},keydown:function(t){e.$emit("keydown",t),"Escape"===t.key&&setTimeout(e.context.closePopover(),300)},blur:function(t){e.$emit("blur",t),e.context.closePopover()},mouseenter:function(t){e.$emit("mouseenter",t),e.context.set("isHovering",!0),setTimeout(e.context.openPopover(),300)},mouseleave:function(t){e.$emit("mouseleave",t),e.context.set("isHovering",!1),setTimeout((function(){!1===e.context.isHovering&&e.context.closePopover()}),300)}}:void 0}},mounted:function(){var t=this,o=this.context.set;this.$nextTick((function(){var n=e.getElement("#"+t.triggerId);n?o("triggerNode",n):console.warn("[Chakra-ui]: Unable to locate PopoverTrigger node")}))},render:function(t){var o=this.$slots.default.filter((function(e){return e.tag}));if(!o)return console.error("[Chakra-ui]: Popover Trigger expects at least one child");if(o.length&&o.length>1)return console.error("[Chakra-ui]: Popover Trigger can only have a single child element");var n=e.cloneVNode(o[0],t),r=this.context,i=r.isOpen,s=r.popoverId;return t(n.componentOptions.Ctor,Object.assign({},n.data,n.componentOptions.listeners||{},{props:Object.assign({},n.data.props||{},n.componentOptions.propsData),attrs:Object.assign({},n.data.attrs,this.$attrs,{id:this.triggerId,"aria-haspopup":"dialog","aria-expanded":i,"aria-controls":s,"data-chakra-component":"CPopoverTrigger"}),nativeOn:this.eventHandlers}),n.componentOptions.children)}},c={name:"CPopoverContent",inheritAttrs:!1,inject:["$PopoverContext","$chakraColorMode"],props:{gutter:{type:[Number,String],default:4},ariaLabel:String},computed:{context:function(){return this.$PopoverContext()},contentId:function(){return"popover-content-"+e.useId()},colorMode:function(){return this.$chakraColorMode()},eventHandlers:function(){var e=this,t=this.context,o=t.trigger,n=t.handleBlur,r=t.closePopover,i=t.closeOnEscape,s={};return"click"===o&&(s={blur:function(t){e.$emit("blur",t),n(t)}}),"hover"===o&&(s=Object.assign({},s,{mouseenter:function(t){e.$emit("mouseenter",t),e.context.set("isHovering",!0),setTimeout(e.context.openPopover(),300)},mouseleave:function(t){e.$emit("mouseleave",t),e.context.set("isHovering",!1),setTimeout((function(){!1===e.context.isHovering&&e.context.closePopover()}),300)}})),s=Object.assign({},s,{keydown:function(t){e.$emit("keydown",t),"Escape"===t.key&&i&&r&&r()}}),s},calculatedAttrs:function(){var e=this.context.trigger;return"click"===e?{role:"dialog","aria-modal":"false"}:"hover"===e?{role:"tooltip"}:void 0}},mounted:function(){var t=this.context,o=t.set,n=t.popoverId;this.$nextTick((function(){var t=e.getElement("#"+n);t?o("contentNode",t):console.warn("[Chakra-ui]: Unable to locate PopoverContent node")}))},render:function(e){var t=this.context,o=t.isOpen,n=t.triggerNode,i=t.popoverId,s=t.usePortal,a=t.placement,c="light"===this.colorMode?"white":"gray.700";return e(r.CPopper,{props:{as:"section",usePortal:s,isOpen:o,placement:a,anchorEl:n,modifiers:[{name:"offset",options:{offset:[0,this.gutter]}}]},attrs:Object.assign({},{bg:c,width:"100%",position:"relative",display:"flex",flexDirection:"column",rounded:"md",shadow:"sm",maxWidth:"xs",_focus:{outline:0,shadow:"outline"}},this.$attrs,{id:i,tabIndex:-1,"aria-labelledby":this.headerId,"aria-describedby":this.bodyId,"aria-label":this.ariaLabel,"aria-hidden":!o},this.calculatedAttrs,{"data-chakra-component":"CPopoverContent"}),nativeOn:this.eventHandlers},this.$slots.default)}},u={name:"CPopoverHeader",mixins:[e.createStyledAttrsMixin("CPopoverHeader")],inject:["$PopoverContext"],computed:{context:function(){return this.$PopoverContext()},headerId:function(){return this.context.headerId},componentStyles:function(){return{px:"0.75rem",py:"0.5rem",borderBottomWidth:"1px"}}},render:function(e){return e("header",{class:[this.className],attrs:Object.assign({},this.computedAttrs,{id:this.headerId,"data-chakra-component":"CPopoverHeader"}),on:this.computedListeners},this.$slots.default)}},d={name:"CPopoverBody",mixins:[e.createStyledAttrsMixin("CPopoverBody")],inject:["$PopoverContext"],computed:{context:function(){return this.$PopoverContext()},bodyId:function(){return this.context.bodyId},componentStyles:function(){return{flex:1,px:"0.75rem",py:"0.5rem"}}},render:function(e){return e(this.as,{class:[this.className],attrs:Object.assign({},this.computedAttrs,{id:this.bodyId,"data-chakra-component":"CPopoverBody"}),on:this.computedListeners},this.$slots.default)}},p={name:"CPopoverArrow",functional:!0,render:function(e,t){var o=t.data,n=i(t,["data"]);return e(r.CPopperArrow,Object.assign({},n,{attrs:Object.assign({},o.attrs,{"data-chakra-component":"CPopoverArrow"})}))}},l={name:"CPopoverCloseButton",inheritAttrs:!1,inject:["$PopoverContext"],computed:{context:function(){return this.$PopoverContext()}},render:function(e){var t=this;return e(o.default,{props:{size:"sm"},on:{click:function(e){t.$emit("click",e),t.context.closePopover()}},attrs:Object.assign({},{pos:"absolute",rounded:"md",top:1,right:2,p:2},this.$attrs,{"data-chakra-component":"CPopoverCloseButton"})})}},h={name:"CPopoverFooter",functional:!0,render:function(e,o){var n=o.data,r=o.slots;i(o,["data","slots"]);return e(t.default,{props:{as:"footer"},attrs:Object.assign({},{px:"0.75rem",py:"0.5rem",borderTopWidth:"1px"},n.attrs,{"data-chakra-component":"CPopoverFooter"})},r().default)}};exports.CPopover=s,exports.CPopoverArrow=p,exports.CPopoverBody=d,exports.CPopoverCloseButton=l,exports.CPopoverContent=c,exports.CPopoverFooter=h,exports.CPopoverHeader=u,exports.CPopoverTrigger=a;
