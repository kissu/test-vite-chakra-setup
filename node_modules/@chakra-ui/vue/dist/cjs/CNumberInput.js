"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./index-60c8e38a.js");require("./internal-icons-94dfadf3.js"),require("@emotion/css"),require("./index-7fafe605.js");var t=require("./index-74285c40.js"),n=require("./CPseudoBox.js"),i=require("./index-01c4258b.js");require("./input.styles-3b6f29be.js");var r=require("./index-3d89d61a.js");function s(e,t){return""===e?parseFloat(0).toFixed(t):parseFloat(e).toFixed(t)}var a={light:{borderColor:"inherit",_active:{bg:"gray.200"}},dark:{color:"whiteAlpha.800",borderColor:"whiteAlpha.300",_active:{bg:"whiteAlpha.300"}}},u=function(e){var t=e.colorMode,n=e.size;return Object.assign({},{borderLeft:"1px",_first:{roundedTopRight:"sm"===n?1:3},_last:{roundedBottomRight:"sm"===n?1:3,mt:"-1px",borderTopWidth:1},_disabled:{opacity:.4,cursor:"not-allowed"}},a[t])};function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&-1===t.indexOf(i)&&(n[i]=e[i]);return n}var l={name:"CNumberInput",inheritAttrs:!1,model:{prop:"value",event:"change"},props:{value:[Number,String],defaultValue:Number,focusInputOnChange:{type:Boolean,default:!0},clampValueOnBlur:{type:Boolean,default:!0},keepWithinRange:{type:Boolean,default:!0},min:{type:Number,default:-1/0},max:{type:Number,default:1/0},step:{type:Number,default:1},precision:Number,getAriaValueText:Function,isReadOnly:Boolean,isInvalid:Boolean,isDisabled:Boolean,isFullWidth:Boolean,size:{type:String,default:"md"},inputId:{type:String}},provide:function(){var e=this;return{$NumberInputContext:function(){return e.NumberInputContext}}},data:function(){return{innerValue:this.defaultValue||null,isFocused:!1,prevNexValue:null,inputNode:void 0,incrementPressed:!1,decrementPressed:!1,incrementEvents:{},decrementEvents:{},clickEvent:e.canUseDOM&&document.documentElement.ontouchstart?"touchstart":"mousedown",incrementStepperProps:void 0,decrementStepperProps:void 0,incrementTimerId:null,decrementTimerId:null}},computed:{NumberInputContext:function(){var e=this;return{size:this.size,value:this._value,isReadOnly:this.isReadOnly,isInvalid:this.isInvalid,isDisabled:this.isDisabled,isFocused:this.isFocused,incrementStepper:this.incrementStepperProps,decrementStepper:this.decrementStepperProps,incrementButton:{nativeOn:{click:function(){return e.handleIncrement()}},attrs:Object.assign({},{"aria-label":"add"},this.keepWithinRange&{disabled:this.value===this.max,"aria-disabled":this.value===this.max})},decrementButton:{nativeOn:{click:function(){return e.handleDecrement()}},attrs:Object.assign({},{"aria-label":"subtract"},this.keepWithinRange&{disabled:this.value===this.min,"aria-disabled":this.value===this.min})},input:Object.assign({},{value:this._value,onChange:this.handleChange,onKeydown:this.handleKeydown,onFocus:function(){e.isFocused=!0},onBlur:function(){e.isFocused=!1,e.clampValueOnBlur&&e.validateAndClamp()},role:"spinbutton",type:"text","aria-valuemin":this.min,"aria-valuemax":this.max,"aria-disabled":this.isDisabled,"aria-valuenow":this.value,"aria-invalid":this.isInvalid||this.isOutOfRange},this.getAriaValueText&&{"aria-valuetext":this.ariaValueText},{readOnly:this.isReadOnly,disabled:this.isDisabled,autoComplete:"off"}),hiddenLabel:{"aria-live":"polite",text:this.getAriaValueText?this.ariaValueText:this._value,style:{position:"absolute",clip:"rect(0px, 0px, 0px, 0px)",height:1,width:1,margin:-1,whiteSpace:"nowrap",border:0,overflow:"hidden",padding:0}},inputId:this._inputId}},isControlled:function(){return e.isDef(this.value)},_value:{get:function(){return this.isControlled?s(this.value,this._precision):this.innerValue?s(this.innerValue,this._precision):this.innerValue},set:function(e){if(!this.defaultValue){var t=this.defaultValue;this.keepWithinRange&&(t=Math.max(Math.min(t,this.max),this.min)),t=s(t,this._precision),this.innerValue=t}this.innerValue=e}},defaultPrecision:function(){return Math.max((e=this.step,(t=/[1-9]([0]+$)|\.([0-9]*)/.exec(String(e)))?t[1]?-t[1].length:t[2]?t[2].length:0:0),0);var e,t},_precision:function(){return this.precision||this.defaultPrecision},isInteractive:function(){return!(this.isReadOnly||this.isDisabled)},isOutOfRange:function(){return this._value>this.max||this.value<this.min},ariaValueText:function(){return this.getAriaValueText?this.getAriaValueText(this._value):null},_inputId:function(){return"number-input-"+(this.inputId||e.useId())}},mounted:function(){var t,n,i=this;this.$nextTick((function(){i.inputNode=e.getElement("#"+i._inputId,i.$el)})),this.$watch((function(e){return[e.incrementPressed,e._value]}),(function(){i.incrementTimerId&&clearTimeout(i.incrementTimerId),i.incrementPressed?i.incrementTimerId=setTimeout(i.handleIncrement,200):clearTimeout(i.incrementTimerId)}));var r=function(){i.incrementPressed=!1};this.incrementStepperProps=((t={})[this.clickEvent]=function(){i.handleIncrement(),i.incrementPressed=!0},t.mouseup=r,t.mouseleave=r,t.touchend=r,t),this.$watch((function(e){return[e.decrementPressed,e._value]}),(function(){i.decrementTimerId&&clearTimeout(i.decrementTimerId),i.decrementPressed?i.decrementTimerId=setTimeout(i.handleDecrement,200):clearTimeout(i.decrementTimerId)}));var s=function(){i.decrementPressed=!1};this.decrementStepperProps=((n={})[this.clickEvent]=function(){i.handleDecrement(),i.decrementPressed=!0},n.mouseup=s,n.mouseleave=s,n.touchend=s,n)},methods:{validateAndClamp:function(){var t=e.isDef(this.max),n=e.isDef(this.min);t&&this._value>this.max&&this.updateValue(this.max),n&&this._value<this.min&&this.updateValue(this.min)},getIncrementFactor:function(e){var t=1;return(e.metaKey||e.ctrlKey)&&(t=.1),e.shiftKey&&(t=10),t},shouldConvertToNumber:function(e){var t="string"!=typeof e?String(e):e,n=t.includes("."),i="0"===t.substr(t.length-1),r="."===t.substr(t.length-1);return(!n||!i)&&(!n||!r)},updateValue:function(e){if(this.prevNextValue!==e){var t=this.shouldConvertToNumber(e)?+e:e;this.isControlled||(this._value=t),this.$emit("change",t),this.prevNextValue=e}},handleIncrement:function(e){if(void 0===e&&(e=this.step),this.isInteractive){var t=Number(this._value)+Number(e);this.keepWithinRange&&(t=Math.min(t,this.max)),t=s(t,this._precision),this.updateValue(t),this.$emit("increment",t),this.focusInput()}},handleDecrement:function(e){if(void 0===e&&(e=this.step),this.isInteractive){var t=Number(this._value)-Number(e);this.keepWithinRange&&(t=Math.max(t,this.min)),t=s(t,this._precision),this.updateValue(t),this.$emit("decrement",t),this.focusInput()}},focusInput:function(){var e=this;requestAnimationFrame((function(){e.inputNode&&e.inputNode.focus()}))},handleBlur:function(e){this.$emit("blur",e)},handleFocus:function(e){this.$emit("focus",e)},handleKeydown:function(t){if(this.$emit("keydown",t),function(e){(function(e){var t=e.which?e.which:e.keyCode;return"."===e.key||!(t>31&&(t<48||t>57)&&(t<96||t>105)&&110!==t)})(e)||e.preventDefault()}(t),this.isInteractive){if("ArrowUp"===t.key){t.preventDefault();var n=this.getIncrementFactor(t);this.handleIncrement(n*this.step)}if("ArrowDown"===t.key){t.preventDefault();var i=this.getIncrementFactor(t);this.handleDecrement(i*this.step)}"Home"===t.key&&(t.preventDefault(),e.isDef(this.min)&&this.updateValue(this.max)),"End"===t.key&&(t.preventDefault(),e.isDef(this.max)&&this.updateValue(this.min))}},handleChange:function(e,t){var n,i=e.target.value;["",void 0].includes(i)&&(n=0),n=i,this.updateValue(n),this.$emit("change",n,e)}},render:function(e){var t=this.$props,n=(t.size,o(t,["size"]));return e(i.CFlex,{props:{align:"stretch"},attrs:Object.assign({},n,{w:this.isFullWidth?"full":null,pos:"relative","data-chakra-component":"CNumberInput"})},this.$slots.default)}},c={name:"CNumberInputField",inheritAttrs:!1,inject:["$NumberInputContext"],computed:{context:function(){return this.$NumberInputContext()}},props:r.inputProps,render:function(t){var n=this,i=this.context,s=i.size,a=i.inputId,u=i.input,l=u.value,c=u.onBlur,h=u.onFocus,d=u.onChange,p=u.onKeydown,m=u.disabled,f=u.readOnly,v=o(u,["value","onBlur","onFocus","onChange","onKeydown","disabled","readOnly"]);return t(r.CInput,{props:Object.assign({},this.$props,{isReadOnly:f,isDisabled:m,size:s,value:l}),attrs:Object.assign({},this.$attrs,{id:a},v,{"data-chakra-component":"CNumberInputField"}),on:{change:e.wrapEvent((function(e){return n.$emit("change",e)}),d)},nativeOn:{input:e.wrapEvent((function(e){return n.$emit("change",e)}),d),blur:e.wrapEvent((function(e){return n.$emit("blur",e)}),c),focus:e.wrapEvent((function(e){return n.$emit("focus",e)}),h),keydown:e.wrapEvent((function(e){return n.$emit("keydown",e)}),p)}})}},h={name:"CNumberInputStepper",functional:!0,render:function(e,t){t.data;var n=t.slots,r=o(t,["data","slots"]);return e(i.CFlex,Object.assign({},r,{props:{direction:"column"},attrs:{width:"24px",margin:"1px",position:"absolute",right:"0px",height:"calc(100% - 2px)",zIndex:1,"data-chakra-component":"CNumberInputStepper"}}),n().default)}},d={name:"CStepperButton",inheritAttrs:!1,inject:["$NumberInputContext","$chakraColorMode"],computed:{context:function(){return this.$NumberInputContext()},colorMode:function(){return this.$chakraColorMode()}},render:function(e){var t=this.context,i=t.isDisabled,r=t.size;return e(n.default,{attrs:Object.assign({},this.$attrs,{display:"flex",justifyContent:"center",alignItems:"center",flex:1,transition:"all 0.3s",userSelect:"none",pointerEvents:i?"none":void 0,lineHeight:"normal"},u({colorMode:this.colorMode,size:r}),{"data-chakra-component":"CStepperButton"})},this.$slots.default)}},p={name:"CNumberIncrementStepper",inheritAttrs:!1,inject:["$NumberInputContext"],computed:{context:function(){return this.$NumberInputContext()}},render:function(e){var n=this.$slots.default||[e(t.CIcon,{props:{name:"triangle-up"},attrs:{height:"0.6em",width:"0.6em"}})],i=this.context,r=i.size,s=i.incrementStepper,a="sm"===r?"11px":"15px";return e(d,{attrs:Object.assign({},this.$attrs,{fontSize:a,"data-chakra-component":"CNumberIncrementStepper"}),nativeOn:s},n)}},m={name:"CNumberDecrementStepper",inheritAttrs:!1,inject:["$NumberInputContext"],computed:{context:function(){return this.$NumberInputContext()}},render:function(e){var n=this.$slots.default||[e(t.CIcon,{props:{name:"triangle-down"},attrs:{height:"0.6em",width:"0.6em"}})],i=this.context,r=i.size,s=i.decrementStepper,a="sm"===r?"11px":"15px";return e(d,{attrs:Object.assign({},this.$attrs,{fontSize:a,"data-chakra-component":"CNumberDecrementStepper"}),nativeOn:s},n)}};exports.CNumberDecrementStepper=m,exports.CNumberIncrementStepper=p,exports.CNumberInput=l,exports.CNumberInputField=c,exports.CNumberInputStepper=h;
